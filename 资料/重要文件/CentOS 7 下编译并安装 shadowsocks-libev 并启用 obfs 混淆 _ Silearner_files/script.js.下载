(function(t){var a=t(window);var e=t(document);t(window).scroll(function(a){var e=t(window).scrollTop();if(e>100){t("#stotop").addClass("btt-visible")}else{t("#stotop").removeClass("btt-visible")}});var n=t("html, body");t('a[href^="#"]').click(function(){n.animate({scrollTop:t(t.attr(this,"href")).offset().top},500);return false});(function(){var n=t("#fixtop");var o=300;var r=t("#banner").css("backgroundImage");a.scroll(function(){var a=e.scrollTop();if(a>o){n.addClass("fix-top");document.getElementById("banner").style.backgroundColor=t("#footer").css("backgroundColor");document.getElementById("banner").style.backgroundImage="none"}else{n.removeClass("fix-top");document.getElementById("banner").style.backgroundImage=r}})})();var o=t("#search-form-wrap"),r=false,i=200;var s=function(){r=true};var l=function(t){setTimeout(function(){r=false;t&&t()},i)};t("#nav-search-btn").on("click",function(){if(r)return;s();o.addClass("on");l(function(){t(".search-form-input").focus()})});t(".search-form-input").on("blur",function(){s();o.removeClass("on");l()});t("body").on("click",function(){t(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(a){a.stopPropagation();var e=t(this),n=e.attr("data-url"),o=encodeURIComponent(n),r="article-share-box-"+e.attr("data-id"),i=e.offset();if(t("#"+r).length){var s=t("#"+r);if(s.hasClass("on")){s.removeClass("on");return}}else{var l=['<div id="'+r+'" class="article-share-box">','<input class="article-share-input" value="'+n+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+o+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://tumblr.com/widgets/share/tool?canonicalUrl='+o+'" class="article-share-tumblr" target="_blank" title="Tumblr"></a>','<a href="http://pinterest.com/pin/create/button/?url='+o+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://www.linkedin.com/shareArticle?mini=true&url='+o+'" class="article-share-linkedin" target="_blank" title="LinkedIn"></a>',"</div>","</div>"].join("");var s=t(l);t("body").append(s)}t(".article-share-box.on").hide();s.css({top:i.top+25,left:i.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){t(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault();t.stopPropagation();window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")});t(".article-entry").each(function(a){t(this).find("img").each(function(){if(t(this).parent().hasClass("fancybox"))return;var a=this.alt;if(a)t(this).after('<span class="caption">'+a+"</span>");t(this).wrap('<a href="'+this.src+'" title="'+a+'" class="fancybox"></a>')});t(this).find(".fancybox").each(function(){t(this).attr("rel","article"+a)})});if(t.fancybox){t(".fancybox").fancybox()}var c=t("#container"),f=false;mobileNavAnimDuration=200;var u=function(){f=true};var h=function(){setTimeout(function(){f=false},mobileNavAnimDuration)};t("#main-nav-toggle").on("click",function(){if(f)return;u();c.toggleClass("mobile-nav-on");h()});t("#wrap").on("click",function(){if(f||!c.hasClass("mobile-nav-on"))return;c.removeClass("mobile-nav-on")})})(jQuery);